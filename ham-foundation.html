<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ham Foundation - stuartmcnab.com</title>
    <meta name="description" content="Ham Foundation - Coming Soon" />
    <link rel="stylesheet" type="text/css" href="main.css?v=2" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["$", "$"],
            ["\\(", "\\)"],
          ],
          displayMath: [
            ["$$", "$$"],
            ["\\[", "\\]"],
          ],
        },
      };
    </script>
  </head>
  <!-- Google tag (gtag.js) -->
  <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=G-Z01GER4HTY"
  ></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "G-Z01GER4HTY");
  </script>
  <body>
    <nav class="navbar">
      <ul class="navbar-list">
        <li><a href="index.html">Home</a></li>
        <li><a href="https://github.com/stuartmcnab">GitHub</a></li>
        <li>
          <a href="https://www.linkedin.com/in/stuart-mcnab/">LinkedIn</a>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle">Learn</a>
          <ul class="dropdown-menu">
            <li><a href="ham-foundation.html">Ham Foundation</a></li>
          </ul>
        </li>
      </ul>
    </nav>
    <div class="main">
      <div class="centered-text">
        <h1>Ham Foundation</h1>
        <p>UK Foundation Ham Exam Flashcards</p>
        <p><a href="index.html">‚Üê Back to Home</a></p>
      </div>
    </div>

    <!-- Flashcard App -->
    <div class="flashcard-app-container">
      <div class="container">
        <header>
          <h1>UK Foundation Ham Exam Flashcards</h1>
          <p class="card-counter">
            Card <span id="current-card">1</span> of
            <span id="total-cards">19</span>
          </p>
        </header>

        <div class="flashcard-container">
          <div class="flashcard" id="flashcard">
            <div class="front">
              <div class="card-content">
                <h3>Question</h3>
                <p id="question-text">Loading...</p>
              </div>
            </div>
            <div class="back">
              <div class="card-content">
                <h3>Answer</h3>
                <p id="answer-text">Loading...</p>
              </div>
            </div>
          </div>
        </div>

        <div class="controls">
          <button id="flip-btn" class="btn btn-flip">Flip Card</button>
          <button id="next-btn" class="btn btn-next">Next Card</button>
        </div>

        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
      </div>
    </div>

    <script>
      // Flashcard application logic
      class FlashcardApp {
        constructor() {
          this.currentCardIndex = 0;
          this.isFlipped = false;
          this.flashcards = []; // Will be loaded from JSON
          this.flashcardElement = document.getElementById("flashcard");
          this.questionText = document.getElementById("question-text");
          this.answerText = document.getElementById("answer-text");
          this.flipBtn = document.getElementById("flip-btn");
          this.nextBtn = document.getElementById("next-btn");
          this.currentCardSpan = document.getElementById("current-card");
          this.totalCardsSpan = document.getElementById("total-cards");
          this.progressFill = document.getElementById("progress-fill");

          this.loadFlashcards();
        }

        async loadFlashcards() {
          try {
            // Show loading state
            this.showLoadingState();

            const response = await fetch("flashcards.json");
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            this.flashcards = await response.json();

            // Hide any existing error messages
            this.hideError();

            this.init();
          } catch (error) {
            console.error("Error loading flashcards:", error);
            this.showError(
              "Failed to load flashcard data. Please check that flashcards.json is available."
            );
          }
        }

        init() {
          // Set total cards count
          this.totalCardsSpan.textContent = this.flashcards.length;

          // Add event listeners
          this.flipBtn.addEventListener("click", () => this.flipCard());
          this.nextBtn.addEventListener("click", () => this.nextCard());

          // Add keyboard support
          document.addEventListener("keydown", (e) => this.handleKeyPress(e));

          // Add click to flip functionality
          this.flashcardElement.addEventListener("click", () =>
            this.flipCard()
          );

          // Display the first card
          this.displayCard();

          // Update progress bar
          this.updateProgress();
        }

        displayCard() {
          const card = this.flashcards[this.currentCardIndex];

          // Reset flip state
          this.isFlipped = false;
          this.flashcardElement.classList.remove("is-flipped");

          // Update card content
          this.questionText.textContent = card.front;
          this.answerText.textContent = card.back;

          // Update card counter
          this.currentCardSpan.textContent = this.currentCardIndex + 1;

          // Update progress bar
          this.updateProgress();

          // Re-render MathJax if present
          if (window.MathJax) {
            MathJax.typesetPromise([this.questionText, this.answerText]);
          }

          // Update button states
          this.updateButtonStates();
        }

        flipCard() {
          this.isFlipped = !this.isFlipped;
          this.flashcardElement.classList.toggle("is-flipped");
          this.updateButtonStates();
        }

        nextCard() {
          this.currentCardIndex =
            (this.currentCardIndex + 1) % this.flashcards.length;
          this.displayCard();
        }

        previousCard() {
          this.currentCardIndex =
            this.currentCardIndex === 0
              ? this.flashcards.length - 1
              : this.currentCardIndex - 1;
          this.displayCard();
        }

        updateButtonStates() {
          // Update flip button text based on state
          this.flipBtn.textContent = this.isFlipped
            ? "Show Question"
            : "Show Answer";

          // Update flip button style for minimal dark theme
          if (this.isFlipped) {
            this.flipBtn.style.background = "#2a2a2a";
            this.flipBtn.style.borderColor = "#666";
          } else {
            this.flipBtn.style.background = "#1a1a1a";
            this.flipBtn.style.borderColor = "#444";
          }
        }

        updateProgress() {
          const progress =
            ((this.currentCardIndex + 1) / this.flashcards.length) * 100;
          this.progressFill.style.width = `${progress}%`;
        }

        handleKeyPress(event) {
          switch (event.key) {
            case " ":
            case "Enter":
              event.preventDefault();
              this.flipCard();
              break;
            case "ArrowRight":
            case "n":
            case "N":
              event.preventDefault();
              this.nextCard();
              break;
            case "ArrowLeft":
            case "p":
            case "P":
              event.preventDefault();
              this.previousCard();
              break;
            case "r":
            case "R":
              event.preventDefault();
              this.shuffleCards();
              break;
          }
        }

        shuffleCards() {
          // Fisher-Yates shuffle algorithm
          for (let i = this.flashcards.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [this.flashcards[i], this.flashcards[j]] = [
              this.flashcards[j],
              this.flashcards[i],
            ];
          }

          // Reset to first card after shuffling
          this.currentCardIndex = 0;
          this.displayCard();

          // Show shuffle notification
          this.showNotification("Cards shuffled!");
        }

        showNotification(message) {
          // Create notification element
          const notification = document.createElement("div");
          notification.textContent = message;
          notification.style.cssText = `
                  position: fixed;
                  top: 20px;
                  right: 20px;
                  background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
                  color: white;
                  padding: 15px 25px;
                  border-radius: 10px;
                  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
                  z-index: 1000;
                  font-weight: 600;
                  animation: slideIn 0.3s ease-out;
              `;

          // Add animation keyframes
          const style = document.createElement("style");
          style.textContent = `
                  @keyframes slideIn {
                      from {
                          transform: translateX(100%);
                          opacity: 0;
                      }
                      to {
                          transform: translateX(0);
                          opacity: 1;
                      }
                  }
                  @keyframes slideOut {
                      from {
                          transform: translateX(0);
                          opacity: 1;
                      }
                      to {
                          transform: translateX(100%);
                          opacity: 0;
                      }
                  }
              `;
          document.head.appendChild(style);

          document.body.appendChild(notification);

          // Remove notification after 3 seconds
          setTimeout(() => {
            notification.style.animation = "slideOut 0.3s ease-out";
            setTimeout(() => {
              if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
              }
              if (style.parentNode) {
                style.parentNode.removeChild(style);
              }
            }, 300);
          }, 3000);
        }

        showLoadingState() {
          // Remove any existing error messages
          this.hideError();

          // Show loading message
          const loadingDiv = document.createElement("div");
          loadingDiv.id = "loading-message";
          loadingDiv.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #1a1a1a;
            color: #e5e5e5;
            padding: 40px;
            border-radius: 12px;
            border: 1px solid #333;
            z-index: 1000;
            font-weight: 400;
            text-align: center;
            max-width: 300px;
            font-size: 0.9rem;
          `;
          loadingDiv.innerHTML = `
            <div style="margin-bottom: 16px; color: #888; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.1em;">Loading</div>
            <div>Preparing your study materials...</div>
          `;
          document.body.appendChild(loadingDiv);
        }

        hideError() {
          // Remove any existing error or loading messages
          const existingError = document.getElementById("error-message");
          const existingLoading = document.getElementById("loading-message");

          if (existingError) {
            existingError.remove();
          }
          if (existingLoading) {
            existingLoading.remove();
          }
        }

        showError(message) {
          // Remove loading state first
          this.hideError();

          // Create error notification
          const errorDiv = document.createElement("div");
          errorDiv.id = "error-message";
          errorDiv.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #1a1a1a;
            color: #e5e5e5;
            padding: 40px;
            border-radius: 12px;
            border: 1px solid #444;
            z-index: 1000;
            font-weight: 400;
            text-align: center;
            max-width: 350px;
            font-size: 0.9rem;
          `;
          errorDiv.innerHTML = `
            <div style="margin-bottom: 16px; color: #888; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.1em;">Error</div>
            <div style="margin-bottom: 16px;">${message}</div>
            <div style="font-size: 0.8rem; color: #666;">
              Make sure you're running the app from a web server
            </div>
          `;
          document.body.appendChild(errorDiv);
        }
      }

      // Initialize the app when the DOM is loaded
      document.addEventListener("DOMContentLoaded", () => {
        const app = new FlashcardApp();

        // Add some helpful instructions
        console.log("Flashcard App Controls:");
        console.log("Space/Enter: Flip card");
        console.log("Right Arrow/N: Next card");
        console.log("Left Arrow/P: Previous card");
        console.log("R: Shuffle cards");
        console.log("Click on card: Flip card");

        // Make app globally accessible for debugging
        window.flashcardApp = app;
      });
    </script>
  </body>
</html>
